<app-navbar></app-navbar>

<div class="page-container">

  <!-- LEFT PANEL -->
  <div class="left-panel">

    <h2>SCHEDULES</h2>

    <!-- DATE SELECTOR -->
    <div class="dates">
      <button *ngFor="let d of dates"
              [class.active]="d.full === selectedDate"
              (click)="selectedDate = d.full">
        {{ d.label }}
      </button>
    </div>

    <!-- LOCATION FILTER -->
    <select>
      <option>Jakarta</option>
    </select>

    <!-- THEATRE LIST -->
    <div class="theatre" *ngFor="let t of theatres">

      <h3>{{ t.name }}</h3>
      <p class="loc">üìç {{ t.location }}</p>

      <!-- SHOWTIME GROUPS -->
      <div class="showtype" *ngFor="let s of t.showtimes">

        <div class="type-row">
          <span class="type">{{ s.type }}</span>
          <span class="price">Rp. {{ s.price_min || s.price }} - {{ s.price_max || s.price }}</span>
        </div>

        <div class="time-buttons">
          <button *ngFor="let tm of s.times"
                  [class.active]="selectedShowtime?.time === tm"
                  (click)="selectShowtime(t, s, tm)">
            {{ tm }}
          </button>
        </div>

      </div>

    </div>
  </div>

  <!-- RIGHT PANEL -->
  <!-- <div class="right-panel">

    <img src="assets/images/movie-poster.png" class="poster">

    <h2>SPIDERMAN: NO WAY HOME</h2>

    <p><strong>Cinema:</strong> {{ selectedShowtime?.theatre }}</p>
    <p><strong>Date:</strong> {{ selectedShowtime?.date }}</p>
    <p><strong>Time:</strong> {{ selectedShowtime?.time }}</p>
    <p><strong>Class:</strong> {{ selectedShowtime?.type }}</p>

    <button class="book-btn" [disabled]="!selectedShowtime" (click)="bookNow()">
      BOOK NOW
    </button>
  </div> -->

  <div class="right-panel" *ngIf="movie">

  <!-- Dynamic Poster -->
  <img [src]="movie.image" class="poster">

  <h2>{{ movie.title }}</h2>

  <p><strong>Genre:</strong> {{ movie.genre.join(', ') }}</p>
  <p><strong>Duration:</strong> {{ movie.duration }}</p>
  <p><strong>Director:</strong> {{ movie.director }}</p>
  <p><strong>Rating:</strong> {{ movie.certification }}</p>

  <hr style="opacity:0.2; margin: 15px 0;">

  <!-- Show summary -->
  <p><strong>Cinema:</strong> {{ selectedShowtime?.theatre || '--' }}</p>
  <p><strong>Date:</strong> {{ selectedShowtime?.date || '--' }}</p>
  <p><strong>Time:</strong> {{ selectedShowtime?.time || '--' }}</p>
  <p><strong>Class:</strong> {{ selectedShowtime?.type || '--' }}</p>

  <button class="book-btn" [disabled]="!selectedShowtime" (click)="bookNow()">
    BOOK NOW
  </button>

</div>


</div>

<app-footer></app-footer>
